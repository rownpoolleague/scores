<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Scoresheet</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
    body {
        font-family: Arial, sans-serif;
        font-size: 18px;
        background-color: #000;   /* Black background */
        color: #fff;              /* White text everywhere else */
    }

    .row { display: flex; justify-content: center; gap: 40px; margin-top: 40px; }
    .block { text-align: left; }

    .roster-box {
        margin-top: 10px;
        padding: 8px 10px;
        border: 1px solid #000;  /* White border so it shows on black */
        min-width: 1px;
        min-height: 1px;
        font-size: 18px;
        white-space: pre-line;
        background-color: #000;  /* White background inside the box */
        color: #fff;             /* Black text inside the box */
    }
 

    label { 
        font-weight: bold; 
        color: #fff; 
        font-size: 18px;
    }

    .playerName { cursor: pointer; padding: 2px 0; }
    .playerName:hover { background-color: #333; }

    h3 { margin: 0 0 8px 0; color: #fff; }

    /* Stat inputs: Wins, Losses, Innings, Safeties, 8B, BR, Handicap */
    input[type="number"] {
        width: 35px;              /* compact width */
        padding: 4px 6px;         /* comfortable but small */
        font-size: 18px;
        background-color: #fff;   /* white box */
        color: #000;              /* black text */
        border: 1px solid #fff;   /* white border so it shows on black background */
        border-radius: 4px;       /* optional: cleaner look */
        margin-bottom: 6px;       /* spacing between inputs */
        text-align: center;
    }

   .stat-row {
    display: flex;
    flex-direction: column;   /* label on top */
    align-items: center;      /* center everything */
    margin-bottom: 12px;
}

.stat-row label {
    width: auto;              /* no fixed width */
    text-align: center;
    margin-bottom: 4px;       /* spacing above input */
}
        .center-label {
    display: flex;
    flex-direction: column;
    align-items: center;
}
        select, input, button {
    font-size: inherit;
    font-family: inherit;
}
        .form-wrapper {
    max-width: 1200px;
    margin: 20px auto;
    padding: 20px;
    border: 2px solid #fff;   /* WHITE BORDER */
    border-radius: 8px;       /* optional, looks nicer */
    box-sizing: border-box;
}
    @media (max-width: 600px) {
    .row {
        flex-direction: column;
        gap: 20px;
        margin-top: 20px;
        align-items: center;   /* center the blocks themselves */
        text-align: center;    /* center text inside blocks */
    }
.form-wrapper {
        margin: 5px;
        padding: 8px;
    }
   .roster-box {
    min-width: 0;
    width: auto;
    max-width: 90%;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
}

    .lag-row {
        flex-direction: column;
        gap: 10px;
        width: 100%;
        margin-top: 20px;
        align-items: center;   /* center the Lag Winner/Lag Loser blocks */
        text-align: center;
    }

    .stat-row {
    display: flex;
    flex-direction: column;   /* label on top */
    align-items: center;      /* center everything */
    margin-bottom: 12px;
}

.stat-row label {
    width: auto;              /* no fixed width */
    text-align: center;
    margin-bottom: 4px;       /* spacing above input */
}
        .stats-container {
    position: relative;
}

/* vertical divider ONLY on mobile */
.stats-container .block:first-child::after {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    right: -30px;            /* half of the 60px gap */
    width: 2px;
    background-color: #fff;
    opacity: 0.6;
}



}
</style>
</head>
<body>
<div class="form-wrapper">


<div class="row">
    <div class="block">
        
        <select id="team">
            <option value="">-- Select Home Team --</option>
            <option>Halfway Crooks</option>
            <option>Haters Welcome</option>
            <option>Lynn's Amigos</option>
            <option>Rackless Behavior</option>
            <option>Dirty Ballers</option>
            <option>8 on Break</option>
            <option>Five Amigos</option>
            <option>Frank's Pizza</option>
            <option>Killer Instinct</option>
            <option>Pete's Bunch</option>
        </select>
        <div id="teamRoster" class="roster-box"></div>
    </div>

    <div class="block">
        
        <select id="opponent">
            <option value="">-- Select Away Team --</option>
            <option>Halfway Crooks</option>
            <option>Haters Welcome</option>
            <option>Lynn's Amigos</option>
            <option>Rackless Behavior</option>
            <option>Dirty Ballers</option>
            <option>8 on Break</option>
            <option>Five Amigos</option>
            <option>Frank's Pizza</option>
            <option>Killer Instinct</option>
            <option>Pete's Bunch</option>
        </select>
        <div id="opponentRoster" class="roster-box"></div>
    </div>
</div>

<div class="stats-container">

    <div class="block center-label">
    <label>Lag Winner</label>
    <input id="lagWinner" readonly style="width:160px;">
</div>

<div class="block center-label">
    <label>Lag Loser</label>
    <input id="lagLoser" readonly style="width:160px;">
</div>
</div>

<div style="text-align:center;margin-top:30px;">
    <label>Innings</label><br>

   <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changeInnings(-1)">−</button>
        <input type="number" id="matchInnings" value="0" min="0">
         <button type="button" class="btn-plus" onclick="changeInnings(1)">+</button>
    </div>
</div>

<div style="display:flex;justify-content:center;gap:60px;margin-top:40px;">

    <div class="block">
        <h3>Lag Winner</h3>

        <div class="stat-row">
    <label>HC</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePAHC(-1)">−</button>
        <input id="pA_hc" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePAHC(1)">+</button>
    </div>
</div>

        <div class="stat-row">
    <label>Wins</label>

    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changeWins(-1)">−</button>
        <input id="pA_wins" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changeWins(1)">+</button>
    </div>
</div>

        <div class="stat-row">
    <label>Losses</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePALosses(-1)">−</button>
        <input id="pA_losses" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePALosses(1)">+</button>
    </div>
</div>

       <div class="stat-row">
    <label>Safeties</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePASafeties(-1)">−</button>
        <input id="pA_safeties" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePASafeties(1)">+</button>
    </div>
</div>

        <div class="stat-row">
    <label>8B</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePA8B(-1)">−</button>
        <input id="pA_e8" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePA8B(1)">+</button>
    </div>
</div>

        <div class="stat-row">
    <label>B+R</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePABR(-1)">−</button>
        <input id="pA_br" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePABR(1)">+</button>
    </div>
</div>
    </div>


    <div class="block">
        <h3>Lag Loser</h3>

       <div class="stat-row">
    <label>HC</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePBHC(-1)">−</button>
        <input id="pB_hc" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePBHC(1)">+</button>
    </div>
</div>

        <div class="stat-row">
    <label>Safeties</label>

    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePBsafeties(-1)">−</button>
        <input id="pB_safeties" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePBsafeties(1)">+</button>
    </div>
</div>

        <div class="stat-row">
    <label>8B</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePB8B(-1)">−</button>
        <input id="pB_e8" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePB8B(1)">+</button>
    </div>
</div>

        <div class="stat-row">
    <label>B+R</label>
    <div class="innings-wrapper">
        <button type="button" class="btn-minus" onclick="changePBBR(-1)">−</button>
        <input id="pB_br" type="number" value="0" min="0">
        <button type="button" class="btn-plus" onclick="changePBBR(1)">+</button>
    </div>
</div>
    </div>

</div>

<div style="text-align:center;margin-top:30px;">
    <label>Match Winner</label><br>
    <input id="matchWinner" readonly>
</div>

<div style="text-align:center;margin-top:30px;">
    <button id="submitMatch">Submit Match</button>
</div>

<script>
const rosters = {
    "Halfway Crooks":["Dan Foster","Tony Perelli","Don Young","Don Rak","Yani Marinopoulos","Brooke Bridges","Jeremie Ketner","Tony Guthrie"],
    "Haters Welcome":["Randy Rycraft","Joe Neal","Jennifer Wagner","Jim Czenk","Phil Nelson","Pam Neal","Greg Wood","Brett Boger"],
    "Lynn's Amigos":["Francisco Ibarra","Noe Castaña","Luis Asavedo","Rico Urvina","Tomas Ramirez","Enrique Meza"],
    "Rackless Behavior":["Jim Nevin","Larry Casper","Harnaik Lal","Freddy Izguerra","Tom Nevin","Doug Misner","Joe Crutchfield"],
    "Dirty Ballers":["Rocky Oiler Sr.","Kevin Pattenaude","Ron Gonzalez","Javier Mauricio","Peggy Wood","Joey Sanchez","John Schoiber"],
    "8 on Break":["Doc Halek","Juergen Jackert","Danny Plowman","John Amrein","Kevin Ward","Shawn Mcbride","Don Murphy","Kenny Esposito"],
    "Five Amigos":["Francisco Tinaje","Sergio Sanchez","Mario Orenday","Felipe Ochoa","Jeronimo Ramire","Kevin Joyner","Tony Perez"],
    "Frank's Pizza":["Jose Gonzalez"],
    "Killer Instinct":["Mike Uhlean","Doug Andrus","Jim Berger","Shawn Vitolka","Mike Zbonski Jr.","Luke Valenzuela","Samantha Kommenich"],
    "Pete's Bunch":["Tom Schroeder","Chuck Harding","Dan Schroeder","Rob Zwart","Pete Steele","Buster Fuller"]
};

const playerData = {
    "Dan Foster":3,"Tony Perelli":5,"Don Young":4,"Don Rak":5,"Yani Marinopoulos":5,"Brooke Bridges":2,
    "Jeremie Ketner":6,"Tony Guthrie":6,"Randy Rycraft":4,"Joe Neal":4,"Jennifer Wagner":3,"Jim Czenk":2,
    "Phil Nelson":4,"Pam Neal":2,"Greg Wood":2,"Brett Boger":5,"Francisco Ibarra":2,"Noe Castaña":2,
    "Luis Asavedo":2,"Rico Urvina":3,"Tomas Ramirez":4,"Enrique Meza":2,"Jim Nevin":4,"Larry Casper":3,
    "Harnaik Lal":3,"Freddy Izguerra":5,"Tom Nevin":3,"Doug Misner":4,"Rocky Oiler Sr.":3,
    "Kevin Pattenaude":3,"Ron Gonzalez":4,"Javier Mauricio":2,"Peggy Wood":2,"Joey Sanchez":2,
    "John Schoiber":2,"Doc Halek":4,"Juergen Jackert":4,"Danny Plowman":5,"John Amrein":3,
    "Kevin Ward":2,"Shawn Mcbride":2,"Don Murphy":3,"Kenny Esposito":3,"Francisco Tinaje":4,
    "Sergio Sanchez":5,"Mario Orenday":4,"Felipe Ochoa":3,"Jeronimo Ramire":5,"Kevin Joyner":2,
    "Tony Perez":4,"Jose Gonzalez":3,"Mike Uhlean":5,"Doug Andrus":4,"Jim Berger":3,
    "Shawn Vitolka":5,"Mike Zbonski Jr.":2,"Luke Valenzuela":6,"Samantha Kommenich":2,
    "Tom Schroeder":4,"Chuck Harding":4,"Dan Schroeder":5,"Rob Zwart":4,"Pete Steele":2,"Buster Fuller":4
};

function updateRoster(sel, div){
    div.innerHTML = (rosters[sel.value]||[])
        .map(p=>`<div class="playerName" data-p="${p}">${p}</div>`).join("");
}

team.onchange=()=>updateRoster(team,teamRoster);
opponent.onchange=()=>updateRoster(opponent,opponentRoster);

let flip=false;
document.addEventListener("click", e => {
    if (e.target.classList.contains("playerName")) {
        const name = e.target.dataset.p;
        const handicap = playerData[name];

        if (!flip) {
            lagWinner.value = name;
            pA_hc.value = handicap;
        } else {
            lagLoser.value = name;
            pB_hc.value = handicap;
        }

        flip = !flip;
    }
});

submitMatch.onclick = () => {
    const data = {
        team: team.value,
        opponent: opponent.value,
        lagWinner: lagWinner.value,
        lagLoser: lagLoser.value,
        matchInnings: matchInnings.value,
        pA: {
            handicap: pA_hc.value,
            wins: pA_wins.value,
            losses: pA_losses.value,
            safeties: pA_safeties.value,
            e8: pA_e8.value,
            br: pA_br.value
        },
        pB: {
            handicap: pB_hc.value,
            safeties: pB_safeties.value,
            e8: pB_e8.value,
            br: pB_br.value
        },
        matchWinner: matchWinner.value
    };

    fetch("https://script.google.com/macros/s/AKfycbxvN0jVzJOdmibwo8bHhcuTbaCoU8tPl-_MvYY4sVJWlGcmviXydCN0lX8onwP5Rj4-/exec", {
        method: "POST",
        body: JSON.stringify(data)
    })
    .then(() => {
        // Clear all inputs
        document.querySelectorAll("input").forEach(i => i.value = "");

        // Show success message
        alert("Match submitted successfully, You may now enter the next match.");
    });
};
    function changeInnings(amount) {
    const input = document.getElementById("matchInnings");
    let value = parseInt(input.value) || 0;
    value += amount;
    if (value < 0) value = 0;
    input.value = value;
}
    function updateMatchWinner() {
    const aWins = parseInt(pA_wins.value) || 0;
    const aLoss = parseInt(pA_losses.value) || 0;

    const aHC = parseInt(pA_hc.value) || 0;
    const bHC = parseInt(pB_hc.value) || 0;

    // Player A wins by reaching their handicap
    if (aWins === aHC && aHC > 0) {
        matchWinner.value = lagWinner.value;
        return;
    }

    // Player B wins when Player A's losses reach B's handicap
    if (aLoss === bHC && bHC > 0) {
        matchWinner.value = lagLoser.value;
        return;
    }

    // Otherwise no winner yet
    matchWinner.value = "";
}
    [pA_wins, pA_losses, pA_hc, pB_hc].forEach(el =>
    el.addEventListener("input", updateMatchWinner)
);
   function changeWins(amount) {
    const input = document.getElementById("pA_wins");
    let value = parseInt(input.value) || 0;

    value = Math.max(0, value + amount);
    input.value = value;

    updateMatchWinner();   // <-- REQUIRED
}
    function changePBsafeties(amount) {
    const input = document.getElementById("pB_safeties");
    let value = parseInt(input.value) || 0;
    value += amount;
    if (value < 0) value = 0;
    input.value = value;
}
    function changePALosses(amount) {
    const input = document.getElementById("pA_losses");
    let value = parseInt(input.value) || 0;

    value = Math.max(0, value + amount);
    input.value = value;

    updateMatchWinner();   // <-- REQUIRED
}
    function changePASafeties(amount) {
    const input = document.getElementById("pA_safeties");
    let value = parseInt(input.value) || 0;
    value = Math.max(0, value + amount);
    input.value = value;
}
    function changePA8B(amount) {
    const input = document.getElementById("pA_e8");
    let value = parseInt(input.value) || 0;
    value = Math.max(0, value + amount);
    input.value = value;
}
    function changePABR(amount) {
    const input = document.getElementById("pA_br");
    let value = parseInt(input.value) || 0;
    value = Math.max(0, value + amount);
    input.value = value;
}
    function changePB8B(amount) {
    const input = document.getElementById("pB_e8");
    let value = parseInt(input.value) || 0;
    value = Math.max(0, value + amount);
    input.value = value;
}
    function changePBBR(amount) {
    const input = document.getElementById("pB_br");
    let value = parseInt(input.value) || 0;
    value = Math.max(0, value + amount);
    input.value = value;
}
    function changePAHC(amount) {
    const input = document.getElementById("pA_hc");
    let value = parseInt(input.value) || 0;
    value = Math.max(0, value + amount);
    input.value = value;
}
    function changePBHC(amount) {
    const input = document.getElementById("pB_hc");
    let value = parseInt(input.value) || 0;
    value = Math.max(0, value + amount);
    input.value = value;
}
</script>
    </div>
<div style="text-align:center; margin-top:40px;">
    <button 
        onclick="window.location.href='https://rownpoolleague.github.io/scores/'"
        style="
            padding: 12px 24px;
            font-size: 20px;
            background-color: #fff;
            color: #000;
            border: 2px solid #fff;
            border-radius: 6px;
            cursor: pointer;
        ">
        Main Menu
    </button>
</div>
</body>
</html>
